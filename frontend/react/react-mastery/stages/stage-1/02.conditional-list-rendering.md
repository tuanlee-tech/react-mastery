# üìÖ NG√ÄY 2: Conditional & List Rendering

## üéØ M·ª•c ti√™u h√¥m nay

- Render c√≥ ƒëi·ªÅu ki·ªán v·ªõi nhi·ªÅu c√°ch kh√°c nhau
- Render danh s√°ch v·ªõi `map()`
- Hi·ªÉu v√† s·ª≠ d·ª•ng `key` prop ƒë√∫ng c√°ch
- Tr√°nh anti-pattern: index as key

---

## üìö PH·∫¶N 1: THEORY (30-45 ph√∫t)

### **1.1. Conditional Rendering**

#### **C√°ch 1: if/else statement (b√™n ngo√†i JSX)**

```jsx
function Greeting({ isLoggedIn }) {
  if (isLoggedIn) {
    return <h1>Welcome back!</h1>;
  }
  return <h1>Please sign up.</h1>;
}
```

#### **C√°ch 2: Ternary Operator (trong JSX)**

```jsx
function Greeting({ isLoggedIn }) {
  return (
    <div>{isLoggedIn ? <h1>Welcome back!</h1> : <h1>Please sign up.</h1>}</div>
  );
}

// Inline ng·∫Øn g·ªçn
function Status({ isOnline }) {
  return <span>{isOnline ? "üü¢ Online" : "üî¥ Offline"}</span>;
}
```

**Khi n√†o d√πng:**

- C√≥ 2 tr∆∞·ªùng h·ª£p r√µ r√†ng (true/false)
- Render kh√°c nhau ho√†n to√†n

#### **C√°ch 3: Logical AND (&&)**

```jsx
function Notification({ hasNewMessages, count }) {
  return (
    <div>
      {hasNewMessages && (
        <div className="notification">You have {count} new messages</div>
      )}
    </div>
  );
}
```

**‚ö†Ô∏è C·∫©n th·∫≠n v·ªõi falsy values:**

```jsx
// ‚ùå SAI - s·∫Ω render s·ªë 0
function MessageList({ messages }) {
  return (
    <div>{messages.length && <p>You have {messages.length} messages</p>}</div>
  );
}
// N·∫øu messages.length = 0, React s·∫Ω render "0" l√™n m√†n h√¨nh!

// ‚úÖ ƒê√öNG
function MessageList({ messages }) {
  return (
    <div>
      {messages.length > 0 && <p>You have {messages.length} messages</p>}
    </div>
  );
}
```

**Khi n√†o d√πng:**

- Ch·ªâ render khi ƒëi·ªÅu ki·ªán true
- Kh√¥ng c·∫ßn fallback (else case)

#### **C√°ch 4: Nullish Coalescing (??)**

```jsx
function UserProfile({ user }) {
  return (
    <div>
      <h2>{user.name ?? "Anonymous"}</h2>
      <p>Age: {user.age ?? "Not specified"}</p>
    </div>
  );
}
```

**`??` vs `||`:**

- `??` ch·ªâ check `null` v√† `undefined`
- `||` check t·∫•t c·∫£ falsy values (0, '', false, null, undefined, NaN)

```jsx
const count = 0;

// V·ªõi ||
<p>{count || 'No items'}</p> // Hi·ªÉn th·ªã: "No items" (v√¨ 0 l√† falsy)

// V·ªõi ??
<p>{count ?? 'No items'}</p> // Hi·ªÉn th·ªã: "0" (v√¨ 0 kh√¥ng ph·∫£i null/undefined)
```

#### **C√°ch 5: Element Variables**

```jsx
function LoginControl({ isLoggedIn }) {
  let button;

  if (isLoggedIn) {
    button = <LogoutButton />;
  } else {
    button = <LoginButton />;
  }

  return (
    <div>
      <h1>Welcome</h1>
      {button}
    </div>
  );
}
```

**Khi n√†o d√πng:**

- Logic ph·ª©c t·∫°p, nhi·ªÅu ƒëi·ªÅu ki·ªán
- Mu·ªën code d·ªÖ ƒë·ªçc h∆°n

#### **C√°ch 6: Switch-like v·ªõi Object Mapping**

```jsx
function StatusBadge({ status }) {
  const badges = {
    pending: <span className="badge-yellow">‚è≥ Pending</span>,
    approved: <span className="badge-green">‚úÖ Approved</span>,
    rejected: <span className="badge-red">‚ùå Rejected</span>,
  };

  return badges[status] || <span>Unknown status</span>;
}
```

---

### **1.2. List Rendering**

#### **Render Array v·ªõi map()**

```jsx
function TodoList() {
  const todos = ["Buy groceries", "Clean house", "Learn React"];

  return (
    <ul>
      {todos.map((todo, index) => (
        <li key={index}>{todo}</li>
      ))}
    </ul>
  );
}
```

#### **Render Array of Objects**

```jsx
function ProductList() {
  const products = [
    { id: 1, name: "Laptop", price: 999 },
    { id: 2, name: "Phone", price: 699 },
    { id: 3, name: "Tablet", price: 499 },
  ];

  return (
    <div>
      {products.map((product) => (
        <div key={product.id} className="product-card">
          <h3>{product.name}</h3>
          <p>${product.price}</p>
        </div>
      ))}
    </div>
  );
}
```

---

### **1.3. Key Prop - QUAN TR·ªåNG!**

#### **T·∫°i sao c·∫ßn key?**

Key gi√∫p React identify items n√†o ƒë√£ thay ƒë·ªïi, ƒë∆∞·ª£c th√™m, ho·∫∑c b·ªã x√≥a.

```jsx
// ‚ùå Kh√¥ng c√≥ key - React warning
{
  items.map((item) => <li>{item}</li>);
}

// ‚úÖ C√≥ key
{
  items.map((item) => <li key={item.id}>{item.name}</li>);
}
```

#### **Quy t·∫Øc ch·ªçn key:**

**‚úÖ ƒê√öNG - D√πng stable unique identifier:**

```jsx
// 1. Database ID
{
  users.map((user) => <UserCard key={user.id} user={user} />);
}

// 2. UUID
{
  items.map((item) => <Item key={item.uuid} data={item} />);
}

// 3. Unique combination
{
  posts.map((post) => (
    <Post key={`${post.authorId}-${post.timestamp}`} post={post} />
  ));
}
```

**‚ùå SAI - Index as key (anti-pattern):**

```jsx
// ‚ùå V·∫•n ƒë·ªÅ khi list thay ƒë·ªïi th·ª© t·ª±
{
  todos.map((todo, index) => <TodoItem key={index} todo={todo} />);
}
```

**T·∫°i sao index as key l√† anti-pattern?**

```jsx
// Initial render
[
  <Todo key={0} text="Buy milk" />,
  <Todo key={1} text="Learn React" />,
  <Todo key={2} text="Exercise" />,
][
  // Sau khi x√≥a item ƒë·∫ßu ti√™n:
  // React nghƒ© key={0} v·∫´n l√† "Buy milk" (nh∆∞ng th·ª±c t·∫ø l√† "Learn React")
  // => Re-render sai, state b·ªã l·ªôn x·ªôn!
  ((
    <Todo key={0} text="Learn React" /> // React nghƒ© ƒë√¢y l√† "Buy milk" update
  ),
  (<Todo key={1} text="Exercise" />)) // React nghƒ© ƒë√¢y l√† "Learn React" update
];
```

**Khi n√†o d√πng index as key ƒë∆∞·ª£c?**

Ch·ªâ khi:

- List KH√îNG bao gi·ªù thay ƒë·ªïi th·ª© t·ª±
- Items KH√îNG b·ªã add/remove
- Items KH√îNG c√≥ state ri√™ng

```jsx
// OK - static list
const COLORS = ["red", "green", "blue"];
{
  COLORS.map((color, index) => (
    <div key={index} style={{ background: color }} />
  ));
}
```

---

### **1.4. K·∫øt h·ª£p Conditional + List Rendering**

```jsx
function UserList({ users, isLoading }) {
  // Empty state
  if (isLoading) {
    return <div>Loading...</div>;
  }

  if (users.length === 0) {
    return <div>No users found</div>;
  }

  // Render list
  return (
    <ul>
      {users.map((user) => (
        <li key={user.id}>
          {user.name}
          {user.isPremium && <span>‚≠ê Premium</span>}
        </li>
      ))}
    </ul>
  );
}
```

---

## üíª PH·∫¶N 2: CODE DEMO (30-45 ph√∫t)

T·∫°o file `TodoApp.jsx`:

```jsx
import { useState } from "react";

function TodoApp() {
  const [todos, setTodos] = useState([
    { id: 1, text: "Learn React", completed: false, priority: "high" },
    { id: 2, text: "Build a project", completed: false, priority: "medium" },
    { id: 3, text: "Deploy app", completed: true, priority: "low" },
  ]);

  const [filter, setFilter] = useState("all"); // 'all', 'active', 'completed'

  // Filter logic
  const filteredTodos = todos.filter((todo) => {
    if (filter === "active") return !todo.completed;
    if (filter === "completed") return todo.completed;
    return true; // 'all'
  });

  // Toggle completion
  const toggleTodo = (id) => {
    setTodos(
      todos.map((todo) =>
        todo.id === id ? { ...todo, completed: !todo.completed } : todo
      )
    );
  };

  // Delete todo
  const deleteTodo = (id) => {
    setTodos(todos.filter((todo) => todo.id !== id));
  };

  // Stats
  const totalTodos = todos.length;
  const completedCount = todos.filter((t) => t.completed).length;
  const activeCount = totalTodos - completedCount;

  // Priority badge
  const getPriorityBadge = (priority) => {
    const badges = {
      high: "üî¥ High",
      medium: "üü° Medium",
      low: "üü¢ Low",
    };
    return badges[priority] || "";
  };

  return (
    <div className="todo-app">
      <h1>Todo List</h1>

      {/* Stats */}
      <div className="stats">
        <span>Total: {totalTodos}</span>
        <span>Active: {activeCount}</span>
        <span>Completed: {completedCount}</span>
      </div>

      {/* Filters */}
      <div className="filters">
        <button onClick={() => setFilter("all")}>All</button>
        <button onClick={() => setFilter("active")}>Active</button>
        <button onClick={() => setFilter("completed")}>Completed</button>
      </div>

      {/* Empty state */}
      {filteredTodos.length === 0 ? (
        <div className="empty-state">
          <p>üìù No todos to display</p>
          {filter !== "all" && (
            <button onClick={() => setFilter("all")}>Show all todos</button>
          )}
        </div>
      ) : (
        /* Todo List */
        <ul className="todo-list">
          {filteredTodos.map((todo) => (
            <li key={todo.id} className={todo.completed ? "completed" : ""}>
              <input
                type="checkbox"
                checked={todo.completed}
                onChange={() => toggleTodo(todo.id)}
              />
              <span className="todo-text">{todo.text}</span>
              <span className="priority-badge">
                {getPriorityBadge(todo.priority)}
              </span>
              {todo.completed && <span className="checkmark">‚úì</span>}
              <button
                onClick={() => deleteTodo(todo.id)}
                className="delete-btn"
              >
                üóëÔ∏è
              </button>
            </li>
          ))}
        </ul>
      )}

      {/* Footer - conditional */}
      {totalTodos > 0 && (
        <footer>
          <p>
            {completedCount === totalTodos
              ? "üéâ All tasks completed!"
              : `Keep going! ${activeCount} task${
                  activeCount !== 1 ? "s" : ""
                } left`}
          </p>
        </footer>
      )}
    </div>
  );
}

export default TodoApp;
```

CSS cho TodoApp:

```css
.todo-app {
  max-width: 600px;
  margin: 20px auto;
  padding: 20px;
  font-family: Arial, sans-serif;
}

.stats {
  display: flex;
  gap: 15px;
  margin: 15px 0;
  padding: 10px;
  background: #f5f5f5;
  border-radius: 5px;
}

.stats span {
  font-weight: bold;
}

.filters {
  display: flex;
  gap: 10px;
  margin: 15px 0;
}

.filters button {
  padding: 8px 16px;
  border: 1px solid #ddd;
  background: white;
  cursor: pointer;
  border-radius: 4px;
}

.filters button:hover {
  background: #f0f0f0;
}

.todo-list {
  list-style: none;
  padding: 0;
}

.todo-list li {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  margin: 8px 0;
  background: white;
  border: 1px solid #ddd;
  border-radius: 5px;
}

.todo-list li.completed {
  opacity: 0.6;
  background: #f9f9f9;
}

.todo-list li.completed .todo-text {
  text-decoration: line-through;
}

.todo-text {
  flex: 1;
}

.priority-badge {
  font-size: 12px;
  padding: 2px 8px;
  border-radius: 3px;
  background: #e0e0e0;
}

.checkmark {
  color: green;
  font-weight: bold;
}

.delete-btn {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 18px;
}

.empty-state {
  text-align: center;
  padding: 40px;
  color: #666;
}

footer {
  margin-top: 20px;
  text-align: center;
  padding: 15px;
  background: #e8f5e9;
  border-radius: 5px;
}
```

---

## üî® PH·∫¶N 3: TH·ª∞C H√ÄNH (60-90 ph√∫t)

### **Exercise 1: User Dashboard**

```jsx
function UserDashboard() {
  const users = [
    {
      id: 1,
      name: "John Doe",
      role: "admin",
      status: "online",
      lastActive: "2 mins ago",
      points: 1250,
    },
    {
      id: 2,
      name: "Jane Smith",
      role: "user",
      status: "offline",
      lastActive: "1 hour ago",
      points: 890,
    },
    {
      id: 3,
      name: "Bob Johnson",
      role: "moderator",
      status: "away",
      lastActive: "15 mins ago",
      points: 2100,
    },
  ];

  // TODO:
  // 1. Render danh s√°ch users v·ªõi key ƒë√∫ng
  // 2. Hi·ªÉn th·ªã badge role kh√°c m√†u (admin=red, moderator=blue, user=green)
  // 3. Hi·ªÉn th·ªã status v·ªõi icon (online=üü¢, offline=‚ö´, away=üü°)
  // 4. Ch·ªâ hi·ªÉn th·ªã lastActive n·∫øu status !== 'online'
  // 5. Hi·ªÉn th·ªã "Top User" badge n·∫øu points > 1000
  // 6. Sort users theo points (highest first)
  // 7. Th√™m empty state n·∫øu users.length === 0
  // 8. Hi·ªÉn th·ªã t·ªïng s·ªë users m·ªói role

  return <div className="user-dashboard">{/* Your code here */}</div>;
}
```

<details>
<summary><span style="font-weight: bold; font-size:18px;">L·ªùi gi·∫£i</span></summary>

```jsx
import React from "react";

function UserDashboard() {
  const users = [
    {
      id: 1,
      name: "John Doe",
      role: "admin",
      status: "online",
      lastActive: "2 mins ago",
      points: 1250,
    },
    {
      id: 2,
      name: "Jane Smith",
      role: "user",
      status: "offline",
      lastActive: "1 hour ago",
      points: 890,
    },
    {
      id: 3,
      name: "Bob Johnson",
      role: "moderator",
      status: "away",
      lastActive: "15 mins ago",
      points: 2100,
    },
  ];

  // 6. Sort users theo points (highest first)
  const sortedUsers = [...users].sort((a, b) => b.points - a.points);

  // 8. T·ªïng s·ªë users m·ªói role
  const roleCounts = users.reduce((acc, user) => {
    acc[user.role] = (acc[user.role] || 0) + 1;
    return acc;
  }, {});

  // Object mapping cho status icons
  const statusIcons = {
    online: "üü¢",
    offline: "‚ö´",
    away: "üü°",
  };

  // Object mapping cho role classes (m√†u badge)
  const roleClasses = {
    admin: "bg-red",
    moderator: "bg-blue",
    user: "bg-green",
  };

  return (
    <div className="user-dashboard">
      {/* 8. Hi·ªÉn th·ªã t·ªïng s·ªë users m·ªói role */}
      <div className="role-summary">
        <h3>Role Summary</h3>
        <ul>
          {Object.entries(roleCounts).map(([role, count]) => (
            <li key={role}>
              {role.charAt(0).toUpperCase() + role.slice(1)}: {count}
            </li>
          ))}
        </ul>
      </div>

      {/* 7. Empty state n·∫øu kh√¥ng c√≥ users */}
      {sortedUsers.length === 0 ? (
        <div className="empty-state">No users found</div>
      ) : (
        /* 1. Render danh s√°ch users v·ªõi key ƒë√∫ng */
        <ul className="user-list">
          {sortedUsers.map((user) => (
            <li key={user.id} className="user-item">
              <span className="user-name">{user.name}</span>

              {/* 2. Badge role v·ªõi m√†u kh√°c nhau */}
              <span className={`role-badge ${roleClasses[user.role]}`}>
                {user.role}
              </span>

              {/* 3. Status v·ªõi icon */}
              <span className="user-status">
                {statusIcons[user.status]} {user.status}
              </span>

              {/* 4. Ch·ªâ hi·ªÉn th·ªã lastActive n·∫øu !== 'online' */}
              {user.status !== "online" && (
                <span className="last-active">{user.lastActive}</span>
              )}

              <span className="user-points">{user.points} points</span>

              {/* 5. "Top User" badge n·∫øu points > 1000 */}
              {user.points > 1000 && (
                <span className="top-user-badge">Top User</span>
              )}
            </li>
          ))}
        </ul>
      )}
    </div>
  );
}

export default UserDashboard;
```

</details>

### **Exercise 2: Product Filter**

```jsx
function ProductFilter() {
  const products = [
    {
      id: 1,
      name: "Laptop Pro",
      category: "electronics",
      price: 1299,
      inStock: true,
      rating: 4.5,
    },
    {
      id: 2,
      name: "Office Chair",
      category: "furniture",
      price: 299,
      inStock: false,
      rating: 4.0,
    },
    {
      id: 3,
      name: "Desk Lamp",
      category: "furniture",
      price: 49,
      inStock: true,
      rating: 4.8,
    },
    {
      id: 4,
      name: "Wireless Mouse",
      category: "electronics",
      price: 29,
      inStock: true,
      rating: 4.2,
    },
    {
      id: 5,
      name: "Notebook",
      category: "stationery",
      price: 5,
      inStock: true,
      rating: 3.9,
    },
  ];

  // TODO:
  // 1. Th√™m filter by category (All, Electronics, Furniture, Stationery)
  // 2. Th√™m filter by stock (All, In Stock, Out of Stock)
  // 3. Th√™m filter by price range (<$50, $50-$500, >$500)
  // 4. Hi·ªÉn th·ªã "Out of Stock" badge cho s·∫£n ph·∫©m h·∫øt h√†ng
  // 5. Hi·ªÉn th·ªã rating v·ªõi stars (‚≠ê)
  // 6. N·∫øu kh√¥ng c√≥ s·∫£n ph·∫©m n√†o match filters, hi·ªÉn th·ªã "No products found"
  // 7. Hi·ªÉn th·ªã s·ªë l∆∞·ª£ng products hi·ªán t·∫°i / t·ªïng s·ªë
  // 8. Sort options: Price (Low to High), Price (High to Low), Rating

  return <div className="product-filter">{/* Your code here */}</div>;
}
```

<details>
<summary><span style="font-weight: bold; font-size:18px;">L·ªùi gi·∫£i</span></summary>

```jsx
import React, { useState } from "react";

function ProductFilter() {
  const products = [
    {
      id: 1,
      name: "Laptop Pro",
      category: "electronics",
      price: 1299,
      inStock: true,
      rating: 4.5,
    },
    {
      id: 2,
      name: "Office Chair",
      category: "furniture",
      price: 299,
      inStock: false,
      rating: 4.0,
    },
    {
      id: 3,
      name: "Desk Lamp",
      category: "furniture",
      price: 49,
      inStock: true,
      rating: 4.8,
    },
    {
      id: 4,
      name: "Wireless Mouse",
      category: "electronics",
      price: 29,
      inStock: true,
      rating: 4.2,
    },
    {
      id: 5,
      name: "Notebook",
      category: "stationery",
      price: 5,
      inStock: true,
      rating: 3.9,
    },
  ];

  // State cho filters & sort
  const [category, setCategory] = useState("all");
  const [stock, setStock] = useState("all");
  const [priceRange, setPriceRange] = useState("all");
  const [sort, setSort] = useState("none");

  // H√†m l·ªçc s·∫£n ph·∫©m
  const filteredProducts = products
    .filter((p) => {
      // 1. Filter category
      if (category !== "all" && p.category !== category) return false;
      // 2. Filter stock
      if (stock === "in" && !p.inStock) return false;
      if (stock === "out" && p.inStock) return false;
      // 3. Filter price range
      if (priceRange === "low" && p.price >= 50) return false;
      if (priceRange === "mid" && (p.price < 50 || p.price > 500)) return false;
      if (priceRange === "high" && p.price <= 500) return false;
      return true;
    })
    // 8. Sort
    .sort((a, b) => {
      if (sort === "price-low") return a.price - b.price;
      if (sort === "price-high") return b.price - a.price;
      if (sort === "rating") return b.rating - a.rating;
      return 0;
    });

  return (
    <div className="product-filter">
      {/* Filters */}
      <div className="filters">
        {/* 1. Category filter */}
        <select value={category} onChange={(e) => setCategory(e.target.value)}>
          <option value="all">All Categories</option>
          <option value="electronics">Electronics</option>
          <option value="furniture">Furniture</option>
          <option value="stationery">Stationery</option>
        </select>

        {/* 2. Stock filter */}
        <select value={stock} onChange={(e) => setStock(e.target.value)}>
          <option value="all">All Stock</option>
          <option value="in">In Stock</option>
          <option value="out">Out of Stock</option>
        </select>

        {/* 3. Price range filter */}
        <select
          value={priceRange}
          onChange={(e) => setPriceRange(e.target.value)}
        >
          <option value="all">All Prices</option>
          <option value="low">&lt;$50</option>
          <option value="mid">$50-$500</option>
          <option value="high">&gt;$500</option>
        </select>

        {/* 8. Sort options */}
        <select value={sort} onChange={(e) => setSort(e.target.value)}>
          <option value="none">No Sort</option>
          <option value="price-low">Price (Low to High)</option>
          <option value="price-high">Price (High to Low)</option>
          <option value="rating">Rating (High to Low)</option>
        </select>
      </div>

      {/* 7. S·ªë l∆∞·ª£ng products */}
      <div className="product-count">
        Showing {filteredProducts.length} / {products.length} products
      </div>

      {/* List products */}
      {filteredProducts.length === 0 ? (
        // 6. Empty state
        <div className="no-products">No products found</div>
      ) : (
        <ul className="product-list">
          {filteredProducts.map((product) => (
            <li key={product.id} className="product-item">
              <span className="product-name">{product.name}</span>
              <span className="product-price">${product.price}</span>

              {/* 5. Rating stars */}
              <span className="product-rating">
                {"‚≠ê".repeat(Math.floor(product.rating))}
              </span>

              {/* 4. Out of Stock badge */}
              {!product.inStock && (
                <span className="out-of-stock">Out of Stock</span>
              )}
            </li>
          ))}
        </ul>
      )}
    </div>
  );
}

export default ProductFilter;
```

</details>

### **Exercise 3: Notification Center**

```jsx
function NotificationCenter() {
  const notifications = [
    {
      id: 1,
      type: "info",
      message: "System update available",
      read: false,
      timestamp: "5 mins ago",
    },
    {
      id: 2,
      type: "success",
      message: "Payment processed successfully",
      read: true,
      timestamp: "1 hour ago",
    },
    {
      id: 3,
      type: "warning",
      message: "Your subscription expires in 3 days",
      read: false,
      timestamp: "2 hours ago",
    },
    {
      id: 4,
      type: "error",
      message: "Failed to sync data",
      read: false,
      timestamp: "3 hours ago",
    },
  ];

  // TODO:
  // 1. Render notifications v·ªõi icon d·ª±a v√†o type:
  //    - info: ‚ÑπÔ∏è (blue)
  //    - success: ‚úÖ (green)
  //    - warning: ‚ö†Ô∏è (yellow)
  //    - error: ‚ùå (red)
  // 2. Unread notifications c√≥ background kh√°c
  // 3. Filter: All, Unread, Read
  // 4. Hi·ªÉn th·ªã unread count badge
  // 5. Button "Mark all as read" (ch·ªâ hi·ªÉn th·ªã n·∫øu c√≥ unread)
  // 6. Button "Clear all" v·ªõi confirmation
  // 7. N·∫øu kh√¥ng c√≥ notifications: "No notifications"
  // 8. Group by type option

  return <div className="notification-center">{/* Your code here */}</div>;
}
```

<details>
<summary><span style="font-weight: bold; font-size:18px;">L·ªùi gi·∫£i</span></summary>

```jsx
import React, { useState } from "react";

function NotificationCenter() {
  const [notifications, setNotifications] = useState([
    {
      id: 1,
      type: "info",
      message: "System update available",
      read: false,
      timestamp: "5 mins ago",
    },
    {
      id: 2,
      type: "success",
      message: "Payment processed successfully",
      read: true,
      timestamp: "1 hour ago",
    },
    {
      id: 3,
      type: "warning",
      message: "Your subscription expires in 3 days",
      read: false,
      timestamp: "2 hours ago",
    },
    {
      id: 4,
      type: "error",
      message: "Failed to sync data",
      read: false,
      timestamp: "3 hours ago",
    },
  ]);

  const [filter, setFilter] = useState("all");
  const [groupByType, setGroupByType] = useState(false);

  // Object mapping cho type: icon & color
  const typeConfig = {
    info: { icon: "‚ÑπÔ∏è", color: "blue" },
    success: { icon: "‚úÖ", color: "green" },
    warning: { icon: "‚ö†Ô∏è", color: "yellow" },
    error: { icon: "‚ùå", color: "red" },
  };

  // Unread count
  const unreadCount = notifications.filter((n) => !n.read).length;

  // Filtered notifications
  const filteredNotifications = notifications.filter((n) => {
    if (filter === "unread") return !n.read;
    if (filter === "read") return n.read;
    return true;
  });

  // Group by type n·∫øu enabled
  const groups = filteredNotifications.reduce((acc, n) => {
    if (!acc[n.type]) acc[n.type] = [];
    acc[n.type].push(n);
    return acc;
  }, {});

  // Mark all as read
  const markAllAsRead = () => {
    setNotifications(notifications.map((n) => ({ ...n, read: true })));
  };

  // Clear all v·ªõi confirmation
  const clearAll = () => {
    if (window.confirm("Are you sure you want to clear all notifications?")) {
      setNotifications([]);
    }
  };

  return (
    <div className="notification-center">
      {/* Header v·ªõi controls */}
      <div className="header">
        <h2>
          Notifications
          {unreadCount > 0 && (
            <span className="unread-badge">{unreadCount}</span>
          )}
        </h2>

        {/* 3. Filter */}
        <select value={filter} onChange={(e) => setFilter(e.target.value)}>
          <option value="all">All</option>
          <option value="unread">Unread</option>
          <option value="read">Read</option>
        </select>

        {/* 8. Group by type */}
        <label className="group-toggle">
          <input
            type="checkbox"
            checked={groupByType}
            onChange={(e) => setGroupByType(e.target.checked)}
          />
          Group by type
        </label>

        {/* 5. Mark all as read (n·∫øu c√≥ unread) */}
        {unreadCount > 0 && (
          <button onClick={markAllAsRead}>Mark all as read</button>
        )}

        {/* 6. Clear all */}
        <button onClick={clearAll}>Clear all</button>
      </div>

      {/* 7. No notifications */}
      {filteredNotifications.length === 0 ? (
        <div className="no-notifications">No notifications</div>
      ) : groupByType ? (
        /* 8. Grouped view */
        Object.entries(groups).map(([type, notifs]) => (
          <div key={type} className="group-section">
            <h3>{type.charAt(0).toUpperCase() + type.slice(1)}</h3>
            <ul className="notification-list">
              {notifs.map((n) => (
                <li
                  key={n.id}
                  className={`notification-item ${!n.read ? "unread" : ""}`}
                >
                  {/* 1. Icon d·ª±a tr√™n type */}
                  <span
                    className="icon"
                    style={{ color: typeConfig[n.type].color }}
                  >
                    {typeConfig[n.type].icon}
                  </span>

                  <span className="message">{n.message}</span>
                  <span className="timestamp">{n.timestamp}</span>
                </li>
              ))}
            </ul>
          </div>
        ))
      ) : (
        /* Flat list */
        <ul className="notification-list">
          {filteredNotifications.map((n) => (
            <li
              key={n.id}
              className={`notification-item ${!n.read ? "unread" : ""}`}
            >
              {/* 1. Icon d·ª±a tr√™n type */}
              <span
                className="icon"
                style={{ color: typeConfig[n.type].color }}
              >
                {typeConfig[n.type].icon}
              </span>

              <span className="message">{n.message}</span>
              <span className="timestamp">{n.timestamp}</span>
            </li>
          ))}
        </ul>
      )}
    </div>
  );
}

export default NotificationCenter;
```

</details>

### **Exercise 4: Blog Posts with Tags (Challenge)**

```jsx
function BlogPosts() {
  const posts = [
    {
      id: 1,
      title: "Getting Started with React",
      author: "John Doe",
      date: "2024-01-15",
      tags: ["react", "javascript", "tutorial"],
      views: 1250,
      likes: 89,
      featured: true,
    },
    {
      id: 2,
      title: "Advanced CSS Techniques",
      author: "Jane Smith",
      date: "2024-01-20",
      tags: ["css", "design", "frontend"],
      views: 890,
      likes: 45,
      featured: false,
    },
    {
      id: 3,
      title: "Node.js Best Practices",
      author: "Bob Johnson",
      date: "2024-01-25",
      tags: ["nodejs", "javascript", "backend"],
      views: 2100,
      likes: 156,
      featured: true,
    },
  ];

  // TODO:
  // 1. Render posts v·ªõi key ƒë√∫ng
  // 2. Featured posts c√≥ border v√†ng v√† icon ‚≠ê
  // 3. Render tags d∆∞·ªõi d·∫°ng badges (clickable)
  // 4. Click v√†o tag ƒë·ªÉ filter posts c√≥ tag ƒë√≥
  // 5. Hi·ªÉn th·ªã views v√† likes v·ªõi icons (üëÅÔ∏è v√† ‚ù§Ô∏è)
  // 6. Sort options: Latest, Most Viewed, Most Liked
  // 7. Search by title
  // 8. N·∫øu filter/search kh√¥ng c√≥ k·∫øt qu·∫£: "No posts found" v·ªõi button reset
  // 9. Hi·ªÉn th·ªã total results count
  // 10. "Load more" button (gi·∫£ l·∫≠p pagination)

  return <div className="blog-posts">{/* Your code here */}</div>;
}
```

<details>
<summary><span style="font-weight: bold; font-size:18px;">L·ªùi gi·∫£i</span></summary>

```jsx
import React, { useState } from "react";

function BlogPosts() {
  const initialPosts = [
    {
      id: 1,
      title: "Getting Started with React",
      author: "John Doe",
      date: "2024-01-15",
      tags: ["react", "javascript", "tutorial"],
      views: 1250,
      likes: 89,
      featured: true,
    },
    {
      id: 2,
      title: "Advanced CSS Techniques",
      author: "Jane Smith",
      date: "2024-01-20",
      tags: ["css", "design", "frontend"],
      views: 890,
      likes: 45,
      featured: false,
    },
    {
      id: 3,
      title: "Node.js Best Practices",
      author: "Bob Johnson",
      date: "2024-01-25",
      tags: ["nodejs", "javascript", "backend"],
      views: 2100,
      likes: 156,
      featured: true,
    },
  ];

  // State
  const [posts] = useState(initialPosts); // Gi·∫£ l·∫≠p, kh√¥ng thay ƒë·ªïi
  const [selectedTag, setSelectedTag] = useState(null);
  const [sort, setSort] = useState("latest");
  const [search, setSearch] = useState("");
  const [visibleCount, setVisibleCount] = useState(2); // B·∫Øt ƒë·∫ßu v·ªõi 2, simulate pagination

  // Filter & Sort
  const filteredPosts = posts
    .filter((p) => {
      // 4. Filter by tag
      if (selectedTag && !p.tags.includes(selectedTag)) return false;
      // 7. Search by title
      if (search && !p.title.toLowerCase().includes(search.toLowerCase()))
        return false;
      return true;
    })
    .sort((a, b) => {
      // 6. Sort options
      if (sort === "views") return b.views - a.views;
      if (sort === "likes") return b.likes - a.likes;
      if (sort === "latest") return new Date(b.date) - new Date(a.date);
      return 0;
    });

  // Visible posts cho pagination
  const visiblePosts = filteredPosts.slice(0, visibleCount);

  // Reset filters
  const resetFilters = () => {
    setSelectedTag(null);
    setSearch("");
    setVisibleCount(2);
  };

  // Load more
  const loadMore = () => {
    setVisibleCount((prev) => prev + 2); // TƒÉng 2 m·ªói l·∫ßn
  };

  return (
    <div className="blog-posts">
      {/* Controls */}
      <div className="controls">
        {/* 7. Search input */}
        <input
          type="text"
          placeholder="Search by title..."
          value={search}
          onChange={(e) => setSearch(e.target.value)}
          className="search-input"
        />

        {/* 6. Sort select */}
        <select
          value={sort}
          onChange={(e) => setSort(e.target.value)}
          className="sort-select"
        >
          <option value="latest">Latest</option>
          <option value="views">Most Viewed</option>
          <option value="likes">Most Liked</option>
        </select>

        {/* Current tag filter */}
        {selectedTag && (
          <span className="current-tag">
            Filtering by: {selectedTag}
            <button onClick={() => setSelectedTag(null)}>Clear</button>
          </span>
        )}
      </div>

      {/* 9. Total count */}
      <div className="results-count">
        {filteredPosts.length} post{filteredPosts.length !== 1 ? "s" : ""} found
      </div>

      {/* 8. No results */}
      {filteredPosts.length === 0 ? (
        <div className="no-posts">
          No posts found
          <button onClick={resetFilters}>Reset filters</button>
        </div>
      ) : (
        <>
          {/* 1. Render list with key */}
          <ul className="post-list">
            {visiblePosts.map((post) => (
              <li
                key={post.id}
                className={`post-item ${post.featured ? "featured" : ""}`}
              >
                {/* 2. Featured icon */}
                {post.featured && <span className="featured-icon">‚≠ê</span>}

                <h3 className="post-title">{post.title}</h3>
                <div className="post-meta">
                  By {post.author} on {post.date}
                </div>

                {/* 3. Tags as badges, 4. Clickable */}
                <div className="post-tags">
                  {post.tags.map((tag) => (
                    <span
                      key={tag}
                      className="tag-badge"
                      onClick={() => setSelectedTag(tag)}
                    >
                      {tag}
                    </span>
                  ))}
                </div>

                {/* 5. Views & Likes with icons */}
                <div className="post-stats">
                  <span>üëÅÔ∏è {post.views}</span>
                  <span>‚ù§Ô∏è {post.likes}</span>
                </div>
              </li>
            ))}
          </ul>

          {/* 10. Load more */}
          {visibleCount < filteredPosts.length && (
            <button onClick={loadMore} className="load-more">
              Load more
            </button>
          )}
        </>
      )}
    </div>
  );
}

export default BlogPosts;
```

</details>

---

## ‚úÖ PH·∫¶N 4: REVIEW & CHECKLIST (15-30 ph√∫t)

### **Conditional Rendering:**

- [ ] Bi·∫øt 6 c√°ch render c√≥ ƒëi·ªÅu ki·ªán
- [ ] Hi·ªÉu khi n√†o d√πng `if/else`, `ternary`, `&&`
- [ ] C·∫©n th·∫≠n v·ªõi `&&` v√† falsy values (s·ªë 0)
- [ ] Bi·∫øt ph√¢n bi·ªát `??` v√† `||`
- [ ] D√πng object mapping cho switch-like logic

### **List Rendering:**

- [ ] D√πng `map()` ƒë·ªÉ render arrays
- [ ] Lu√¥n lu√¥n th√™m `key` prop
- [ ] Hi·ªÉu t·∫°i sao key quan tr·ªçng
- [ ] Bi·∫øt ch·ªçn key ƒë√∫ng (stable, unique)
- [ ] Tr√°nh d√πng index as key (tr·ª´ static lists)
- [ ] K·∫øt h·ª£p conditional + list rendering

### **Common Mistakes:**

```jsx
// ‚ùå Thi·∫øu key
{
  items.map((item) => <Item data={item} />);
}

// ‚ùå Index as key (khi list c√≥ th·ªÉ thay ƒë·ªïi)
{
  items.map((item, i) => <Item key={i} data={item} />);
}

// ‚ùå Render s·ªë 0
{
  count && <p>Count: {count}</p>;
}

// ‚ùå Key kh√¥ng unique
{
  items.map((item) => <Item key={item.name} data={item} />);
}

// ‚úÖ ƒê√öNG
{
  items.map((item) => <Item key={item.id} data={item} />);
}

// ‚úÖ ƒê√öNG
{
  count > 0 && <p>Count: {count}</p>;
}
```

---

## üéØ HOMEWORK

### **1. Advanced Todo App**

M·ªü r·ªông TodoApp v·ªõi:

- Add new todo (input + form)
- Edit todo (inline editing)
- Categories/Tags cho todos
- Due dates
- Search functionality
- LocalStorage persistence (bonus)

### **2. E-commerce Product List**

T·∫°o product listing v·ªõi:

- Multiple filters (category, price, rating, availability)
- Search bar
- Sort options
- Grid/List view toggle
- Pagination
- "Quick view" modal (bonus)

### **3. Social Media Feed**

T·∫°o feed v·ªõi:

- Different post types (text, image, video)
- Like/comment counts
- "Load more" functionality
- Filter by post type
- User avatars v√† names
- Timestamps
- Trending/Latest toggle

### **4. ƒê·ªçc th√™m:**

- [React Docs - Conditional Rendering](https://react.dev/learn/conditional-rendering)
- [React Docs - Rendering Lists](https://react.dev/learn/rendering-lists)
- [Why index as key is an anti-pattern](https://robinpokorny.com/blog/index-as-a-key-is-an-anti-pattern/)

---

## üìù Key Takeaways

1. **Conditional Rendering**: Ch·ªçn c√°ch ph√π h·ª£p v·ªõi t·ª´ng t√¨nh hu·ªëng
2. **List Rendering**: Lu√¥n d√πng `key` v·ªõi unique identifier
3. **Key Prop**: Gi√∫p React optimize rendering v√† tr√°nh bugs
4. **Combine Patterns**: Conditional + List = powerful UIs

---

**üöÄ Ng√†y mai:** Components Deep Dive - Props, Destructuring, Children, v√† Composition Patterns!
